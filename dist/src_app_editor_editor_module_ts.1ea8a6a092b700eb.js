"use strict";(self.webpackChunkang2_conduit=self.webpackChunkang2_conduit||[]).push([["src_app_editor_editor_module_ts"],{8745:(A,d,o)=>{o.r(d),o.d(d,{EditorModule:()=>T});var g=o(1404),l=o(6514),a=o(2382),c=o(7543),t=o(4893),h=o(6860),f=o(9808);function v(e,s){if(1&e){const r=t.EpF();t.TgZ(0,"span",15)(1,"i",16),t.NdJ("click",function(){const u=t.CHM(r).$implicit;return t.oxw().removeTag(u)}),t.qZA(),t._uU(2),t.qZA()}if(2&e){const r=s.$implicit;t.xp6(2),t.hij(" ",r," ")}}let p=(()=>{class e{constructor(r,i,n,u,m){this.articlesService=r,this.route=i,this.router=n,this.fb=u,this.cd=m,this.article={},this.tagField=new a.NI,this.errors={},this.isSubmitting=!1,this.articleForm=this.fb.group({title:"",description:"",body:""}),this.article.tagList=[]}ngOnInit(){this.route.data.subscribe(r=>{r.article&&(this.article=r.article,this.articleForm.patchValue(r.article),this.cd.markForCheck())})}trackByFn(r,i){return r}addTag(){const r=this.tagField.value;this.article.tagList.indexOf(r)<0&&this.article.tagList.push(r),this.tagField.reset("")}removeTag(r){this.article.tagList=this.article.tagList.filter(i=>i!==r)}submitForm(){this.isSubmitting=!0,this.updateArticle(this.articleForm.value),this.articlesService.save(this.article).subscribe(r=>{this.router.navigateByUrl("/article/"+r.slug),this.cd.markForCheck()},r=>{this.errors=r,this.isSubmitting=!1,this.cd.markForCheck()})}updateArticle(r){Object.assign(this.article,r)}}return e.\u0275fac=function(r){return new(r||e)(t.Y36(c.JU),t.Y36(l.gz),t.Y36(l.F0),t.Y36(a.qu),t.Y36(t.sBO))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-editor-page"]],decls:20,vars:6,consts:[[1,"editor-page"],[1,"container","page"],[1,"row"],[1,"col-md-10","offset-md-1","col-xs-12"],[3,"errors"],[3,"formGroup"],[3,"disabled"],[1,"form-group"],["formControlName","title","type","text","placeholder","Article Title",1,"form-control","form-control-lg"],["formControlName","description","type","text","placeholder","What's this article about?",1,"form-control"],["formControlName","body","rows","8","placeholder","Write your article (in markdown)",1,"form-control"],["type","text","placeholder","Enter tags",1,"form-control",3,"formControl","keyup.enter"],[1,"tag-list"],["class","tag-default tag-pill",4,"ngFor","ngForOf","ngForTrackBy"],["type","button",1,"btn","btn-lg","pull-xs-right","btn-primary",3,"click"],[1,"tag-default","tag-pill"],[1,"ion-close-round",3,"click"]],template:function(r,i){1&r&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t._UZ(4,"app-list-errors",4),t.TgZ(5,"form",5)(6,"fieldset",6)(7,"fieldset",7),t._UZ(8,"input",8),t.qZA(),t.TgZ(9,"fieldset",7),t._UZ(10,"input",9),t.qZA(),t.TgZ(11,"fieldset",7)(12,"textarea",10),t._uU(13,"              "),t.qZA()(),t.TgZ(14,"fieldset",7)(15,"input",11),t.NdJ("keyup.enter",function(){return i.addTag()}),t.qZA(),t.TgZ(16,"div",12),t.YNc(17,v,3,1,"span",13),t.qZA()(),t.TgZ(18,"button",14),t.NdJ("click",function(){return i.submitForm()}),t._uU(19," Publish Article "),t.qZA()()()()()()()),2&r&&(t.xp6(4),t.Q6J("errors",i.errors),t.xp6(1),t.Q6J("formGroup",i.articleForm),t.xp6(1),t.Q6J("disabled",i.isSubmitting),t.xp6(9),t.Q6J("formControl",i.tagField),t.xp6(2),t.Q6J("ngForOf",i.article.tagList)("ngForTrackBy",i.trackByFn))},directives:[h.S,a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,a.oH,f.sg],encapsulation:2,changeDetection:0}),e})();var F=o(4004),y=o(262);const E=[{path:"",component:p,canActivate:[c.a1]},{path:":slug",component:p,canActivate:[c.a1],resolve:{article:(()=>{class e{constructor(r,i,n){this.articlesService=r,this.router=i,this.userService=n}resolve(r,i){return this.articlesService.get(r.params.slug).pipe((0,F.U)(n=>{if(this.userService.getCurrentUser().username===n.author.username)return n;this.router.navigateByUrl("/")}),(0,y.K)(n=>this.router.navigateByUrl("/")))}}return e.\u0275fac=function(r){return new(r||e)(t.LFG(c.JU),t.LFG(l.F0),t.LFG(c.KD))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}];let b=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[l.Bz.forChild(E)],l.Bz]}),e})(),T=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[],imports:[[g.m8,b]]}),e})()}}]);